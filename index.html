<!DOCTYPE html>
<html manifest="placesandthings.manifest">
	<head>
	<title>Places and Things</title>
	<link rel="stylesheet" href="css/jquery.mobile-1.0a1.min.css" />
	<script src="js/jquery-1.4.3.min.js"></script>
	<script src="js/jquery.mobile-1.0a1.min.js"></script>
        <script src="js/modernizr-1.5.min.js"></script>
        <script src="js/pat.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  if (Modernizr.localstorage) {
    // window.localStorage is available

    $('#reset-all').click(function(){
      clearLocalStorage();
      updatePlacesDisplay();
      updateThingsDisplay();
    });

    $('#create-place-button').click(createPlaceSubmittal);
    $('#add-place-form').submit(createPlaceSubmittal);

    $('#create-thing-button').click(createThingSubmittal);
    $('#add-thing-form').submit(createThingSubmittal);

    function createThingSubmittal() {
      addThing($('#new-thing-text').val());
      updateThingsDisplay(); // update things list
      window.location.hash = "#things";
    }

    function createPlaceSubmittal() {
      addPlace($('#new-place-text').val());
      updatePlacesDisplay(); // update places list
      window.location.hash = "#places";
    }

    updatePlacesDisplay();
    updateThingsDisplay();
  } else {
    window.location.hash = "#unsupported"
  }
});

</script>
</head>
<body>
<div data-role="page" data-theme="b" id="home">

	<div data-role="header">
		<h1>Places and Things</h1>
	</div><!-- /header -->

	<div data-role="content">
          <p>Welcome to Places and Things, your personal inventory management tool.</p>
          <p>This is an experimental tool to learn and demo jQuery-mobile, and HTML5.  Use at your own risk!</p>
          <ul data-role="listview" data-inset="true" data-theme="a" data-dividertheme="b">
            <li data-role="list-divider">Inventory</li>
            <li><a href="#places">Places</a><span id="places-count" class="ui-li-count">0</span></li>
            <li><a href="#things">Things</a><span id="things-count" class="ui-li-count">0</span></li>
          </ul>

          <ul data-role="listview" data-inset="true" data-theme="a" data-dividertheme="b">
            <li data-role="list-divider">Administration</li>
            <li><a id="reset-all" href="" >Reset (no confirmation!)</a></li>
          </ul>

	</div><!-- /content -->

	<div data-role="footer">
		<h4></h4>
	</div><!-- /footer -->
</div><!-- /page -->

<div data-role="page" id="places">

	<div data-role="header">
		<h1>My Places</h1>
	</div><!-- /header -->

	<div data-role="content">
          <p id="placesIntro"></p>
          <a href="#add-place" data-rel="dialog" data-transition="pop" data-inline="true" data-role="button" data-icon="plus">Add Place</a>
	</div><!-- /content -->

	<div data-role="footer">
		<h4></h4>
	</div><!-- /footer -->
</div><!-- /page -->

<div data-role="page" id="things">

	<div data-role="header">
		<h1>My Things</h1>
	</div><!-- /header -->

	<div data-role="content">
          <p id="thingsIntro"></p>
          <a href="#add-thing" data-rel="dialog" data-transition="pop" data-inline="true" data-role="button" data-icon="plus">Add Thing</a>
	</div><!-- /content -->

	<div data-role="footer">
		<h4></h4>
	</div><!-- /footer -->
</div><!-- /page -->

<div data-role="page" id="add-place">

  <div data-role="header" data-theme="d" data-position="inline">
    <h1>Add Place</h1>
  </div>

  <div data-role="content" data-theme="c">
    <h1>Create New Place</h1>
    <p>Create a new place by completing this form.</p>
    <form id="add-place-form" action="" method="get">
      <div data-role="fieldcontain">
        <label for="name">Place Name:</label>
        <input type="text" name="place" id="new-place-text" value=""  />
      </div>
    </form>
    <a id="create-place-button" href="#places" data-role="button" data-theme="b">Create</a>
    <a href="#places" data-role="button" data-theme="c">Cancel</a>
  </div>
</div>

<div data-role="page" id="add-thing">

  <div data-role="header" data-theme="d" data-position="inline">
    <h1>Add Thing</h1>
  </div>

  <div data-role="content" data-theme="c">
    <h1>Create New Thing</h1>
    <p>Create a new thing by completing this form.</p>
    <form id="add-thing-form" action="" method="get">
      <div data-role="fieldcontain">
        <label for="name">Thing Name:</label>
        <input type="text" name="thing" id="new-thing-text" value=""  />
      </div>
    </form>
    <a id="create-thing-button" href="#things" data-role="button" data-theme="b">Create</a>
    <a href="#things" data-role="button" data-theme="c">Cancel</a>
  </div>
</div>

<div data-role="page" id="unsupported">

	<div data-role="header">
		<h1>Sorry!</h1>
	</div><!-- /header -->

	<div data-role="content">
		<p>Your browser is not supported.</p>
	</div><!-- /content -->

	<div data-role="footer">
		<h4></h4>
	</div><!-- /footer -->
</div><!-- /page -->

</body>
</html>
